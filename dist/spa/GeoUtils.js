var BMapLib=window.BMapLib=BMapLib||{};(function(){var t=6370996.81,a=BMapLib.GeoUtils=function(){};function n(t,a,n){return null!=a&&(t=Math.max(t,a)),null!=n&&(t=Math.min(t,n)),t}function l(t,a,n){while(t>n)t-=n-a;while(t<a)t+=n-a;return t}a.isPointInRect=function(t,a){if(!(t instanceof BMap.Point)||!(a instanceof BMap.Bounds))return!1;var n=a.getSouthWest(),l=a.getNorthEast();return t.lng>=n.lng&&t.lng<=l.lng&&t.lat>=n.lat&&t.lat<=l.lat},a.isPointInCircle=function(t,n){if(!(t instanceof BMap.Point)||!(n instanceof BMap.Circle))return!1;var l=n.getCenter(),e=n.getRadius(),i=a.getDistance(t,l);return i<=e},a.isPointOnPolyline=function(t,a){if(!(t instanceof BMap.Point)||!(a instanceof BMap.Polyline))return!1;var n=a.getBounds();if(!this.isPointInRect(t,n))return!1;for(var l=a.getPath(),e=0;e<l.length-1;e++){var i=l[e],r=l[e+1];if(t.lng>=Math.min(i.lng,r.lng)&&t.lng<=Math.max(i.lng,r.lng)&&t.lat>=Math.min(i.lat,r.lat)&&t.lat<=Math.max(i.lat,r.lat)){var o=(i.lng-t.lng)*(r.lat-t.lat)-(r.lng-t.lng)*(i.lat-t.lat);if(o<2e-10&&o>-2e-10)return!0}}return!1},a.isPointInPolygon=function(t,a){if(!(t instanceof BMap.Point)||!(a instanceof BMap.Polygon))return!1;var n=a.getBounds();if(!this.isPointInRect(t,n))return!1;var l,e,i=a.getPath(),r=i.length,o=!0,M=0,h=2e-10,g=t;l=i[0];for(var s=1;s<=r;++s){if(g.equals(l))return o;if(e=i[s%r],g.lat<Math.min(l.lat,e.lat)||g.lat>Math.max(l.lat,e.lat))l=e;else{if(g.lat>Math.min(l.lat,e.lat)&&g.lat<Math.max(l.lat,e.lat)){if(g.lng<=Math.max(l.lng,e.lng)){if(l.lat==e.lat&&g.lng>=Math.min(l.lng,e.lng))return o;if(l.lng==e.lng){if(l.lng==g.lng)return o;++M}else{var f=(g.lat-l.lat)*(e.lng-l.lng)/(e.lat-l.lat)+l.lng;if(Math.abs(g.lng-f)<h)return o;g.lng<f&&++M}}}else if(g.lat==e.lat&&g.lng<=e.lng){var c=i[(s+1)%r];g.lat>=Math.min(l.lat,c.lat)&&g.lat<=Math.max(l.lat,c.lat)?++M:M+=2}l=e}}return M%2!=0},a.degreeToRad=function(t){return Math.PI*t/180},a.radToDegree=function(t){return 180*t/Math.PI},a.getDistance=function(e,i){return e instanceof BMap.Point&&i instanceof BMap.Point?(e.lng=l(e.lng,-180,180),e.lat=n(e.lat,-74,74),i.lng=l(i.lng,-180,180),i.lat=n(i.lat,-74,74),r=a.degreeToRad(e.lng),M=a.degreeToRad(e.lat),o=a.degreeToRad(i.lng),h=a.degreeToRad(i.lat),t*Math.acos(Math.sin(M)*Math.sin(h)+Math.cos(M)*Math.cos(h)*Math.cos(o-r))):0;var r,o,M,h},a.getPolylineDistance=function(t){if(t instanceof BMap.Polyline||t instanceof Array){var n;if(n=t instanceof BMap.Polyline?t.getPath():t,n.length<2)return 0;for(var l=0,e=0;e<n.length-1;e++){var i=n[e],r=n[e+1],o=a.getDistance(i,r);l+=o}return l}return 0},a.getPolygonArea=function(a){if(!(a instanceof BMap.Polygon)&&!(a instanceof Array))return 0;var n;if(n=a instanceof BMap.Polygon?a.getPath():a,n.length<3)return 0;for(var l,e,i=0,r=0,o=0,M=0,h=0,g=0,s=0,f=0,c=0,P=0,u=0,I=0,B=0,v=0,p=0,d=0,m=0,y=0,R=0,x=0,T=0,b=0,D=0,w=0,L=0,q=0,A=0,C=0,E=0,G=0,N=0,O=0,S=0,U=0,W=t,j=n.length,k=0;k<j;k++)0==k?(r=n[j-1].lng*Math.PI/180,o=n[j-1].lat*Math.PI/180,M=n[0].lng*Math.PI/180,h=n[0].lat*Math.PI/180,g=n[1].lng*Math.PI/180,s=n[1].lat*Math.PI/180):k==j-1?(r=n[j-2].lng*Math.PI/180,o=n[j-2].lat*Math.PI/180,M=n[j-1].lng*Math.PI/180,h=n[j-1].lat*Math.PI/180,g=n[0].lng*Math.PI/180,s=n[0].lat*Math.PI/180):(r=n[k-1].lng*Math.PI/180,o=n[k-1].lat*Math.PI/180,M=n[k].lng*Math.PI/180,h=n[k].lat*Math.PI/180,g=n[k+1].lng*Math.PI/180,s=n[k+1].lat*Math.PI/180),f=Math.cos(h)*Math.cos(M),c=Math.cos(h)*Math.sin(M),P=Math.sin(h),u=Math.cos(o)*Math.cos(r),I=Math.cos(o)*Math.sin(r),B=Math.sin(o),v=Math.cos(s)*Math.cos(g),p=Math.cos(s)*Math.sin(g),d=Math.sin(s),m=(f*f+c*c+P*P)/(f*u+c*I+P*B),y=(f*f+c*c+P*P)/(f*v+c*p+P*d),R=m*u-f,x=m*I-c,T=m*B-P,b=y*v-f,D=y*p-c,w=y*d-P,E=(b*R+D*x+w*T)/(Math.sqrt(b*b+D*D+w*w)*Math.sqrt(R*R+x*x+T*T)),E=Math.acos(E),L=D*T-w*x,q=0-(b*T-w*R),A=b*x-D*R,C=0!=f?L/f:0!=c?q/c:A/P,C>0?(G+=E,S++):(N+=E,O++);return l=G+(2*Math.PI*O-N),e=2*Math.PI*S-G+N,U=G>N?l-(j-2)*Math.PI<1?l:e:e-(j-2)*Math.PI<1?e:l,i=(U-(j-2)*Math.PI)*W*W,i}})();